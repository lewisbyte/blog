---
layout: post
title: BIBFRAME 开源组件
date: 2026-02-03 10:40:43
tags: BIBFRAME
---


## BIBFRAME 总览
- 美国国会图书馆基于BIBFRAME编目，开源了很多相关生态的基础组件，我在这里梳理、总结一下整个美国国会图书馆的开源组件生态，尝试将主要的开源组件把玩一下，测试一下其组件基础的能力，并尝试集成一下各组件，验证能否形成一个完整的业务生态闭环。


### BIBFRAME编辑器

- 源码地址：https://github.com/lcnetdev/marva-quartz

- 使用方法：
  - 1. 执行以下shell脚本，编译运行
```sh
git clone https://github.com/lcnetdev/marva-quartz.git
cd marva-quartz
npm install
npm run dev-external
```
  - 2. 本地访问：http://localhost:4444/bfe2/quartz/


### 编辑器后端服务

- 地址：ttps://github.com/lcnetdev/marva-backend


#### 核心后端服务组件

1.  **`util`** (Util Service)
    *   **角色**: **业务管家**
    *   **功能**:
        *   不仅是“胶水层”，它更像是整个应用的大脑。
        *   负责处理复杂的业务动作，比如“发布”（将数据从暂存区推送到正式区或外部系统）。
        *   提供辅助功能，如 MARC 格式预览、Git 数据同步。
    *   **关键点**: 它直接连接数据库，并协调其他服务。

2.  **`ldpjs-staging`** (Staging Data Service)
    *   **角色**: **草稿箱存储服务**
    *   **功能**:
        *   专门负责存储**正在编辑中、未完成**的编目数据。
        *   数据存放在 `resourcesStaging` 集合中。
        *   允许频繁的读写操作，主要服务于编辑器的“保存草稿”功能。

3.  **`ldpjs-production`** (Production Data Service)
    *   **角色**: **正式库存储服务**
    *   **功能**:
        *   专门负责存储**已发布、生效**的编目数据。
        *   数据存放在 `resourcesProduction` 集合中。
        *   作为数据的“最终归宿”，供查询和对外发布使用。

4.  **`scriptshifter`** (Translation Service)
    *   **角色**: **多语言转写助手**
    *   **功能**:
        *   在编目过程中，实时将非拉丁语系文字（如中文标题）转写为拉丁字母拼音。
        *   是一个纯粹的工具服务，无状态。

5.  **`dctap-dancer`** (Profile Editor Backend)
    *   **角色**: **规则模板管理器**
    *   **功能**:
        *   管理“编目规则”（Profile）。
        *   编目员通过它来定义：在录入某类书时，哪些字段是必填的，哪些字段需要下拉菜单。
        *   这些规则定义了 `ldpjs` 中数据的形状。

6.  **`database`** (MongoDB)
    *   **角色**: **数据中心**
    *   **功能**:
        *   物理存储所有数据，包括：草稿数据 (`resourcesStaging`)、正式数据 (`resourcesProduction`)、用户信息、配置信息等。

7.  **`reverse`** (Nginx Gateway)
    *   **角色**: **前台接待**
    *   **功能**:
        *   统一入口，根据请求类型将用户引导到不同的服务窗口（是存草稿？还是查正式记录？还是修改模板？）。

#### 组件关系图解

![flow-chart](./20260203/01.png)